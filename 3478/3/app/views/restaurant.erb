<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Restaurants</title>
  <style>
    @import url(//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css);

    .detailBox {
      width: 320px;
      border: 1px solid #bbb;
      margin: 50px;
    }

    .titleBox {
      background-color: #fdfdfd;
      padding: 10px;
    }

    .titleBox label {
      color: #444;
      margin: 0;
      display: inline-block;
    }

    .commentBox {
      padding: 10px;
      border-top: 1px dotted #bbb;
    }

    .commentBox .form-group:first-child, .actionBox .form-group:first-child {
      width: 80%;
    }

    .commentBox .form-group:nth-child(2), .actionBox .form-group:nth-child(2) {
      width: 18%;
    }

    .actionBox .form-group * {
      width: 100%;
    }

    .taskDescription {
      margin-top: 10px 0;
    }

    .commentList {
      padding: 0;
      list-style: none;
      max-height: 200px;
      overflow: auto;
    }

    .commentList li {
      margin: 0;
      margin-top: 10px;
    }

    .commentList li > div {
      display: table-cell;
    }

    .commenterImage {
      width: 30px;
      margin-right: 5px;
      height: 100%;
      float: left;
    }

    .commenterImage img {
      width: 100%;
      border-radius: 50%;
    }

    .commentText p {
      margin: 0;
    }

    .sub-text {
      color: #aaa;
      font-family: verdana;
      font-size: 11px;
    }

    .actionBox {
      border-top: 1px dotted #bbb;
      padding: 10px;
    }
  </style>
</head>


<body>
<div class="container mt-3">

  <div class="header clearfix">
    <nav>
      <ul class="nav nav-pills float-right">
        <li class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/sign_in">Log in</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/sign_up">Register</a>
        </li>
      </ul>
    </nav>
    <h3 class="text-muted">Restaurants</h3>
  </div>

  <br>
  <div class="row marketing">
    <div class="card mt-2 ml-2">
      <div class="card-body">
        <h5 class="card-title">Название: <%= @restaurant.name %> </h5>
        <h5 class="card-title">Средняя оценка: <%= "%.2f" % @restaurant.comments.average(:grade).to_f %> </h5>
        <p class="card-text">Адресс: <%= @restaurant.address %> </p>
        <p class="card-text">Описание: <%= @restaurant.full_description %> </p>

      </div>
    </div>
  </div>


  <div class="panel">
    <div class="titleBox">
      <label>Reviews</label>
    </div>

    <div class="actionBox">
      <!--List of comments-->
      <ul class="commentList">

        <!--Each element-->
        <% @restaurant.comments.each do |comment| %>
          <li>
            <div class="commenterImage">
              <img src="https://cdn4.iconfinder.com/data/icons/glyphs/24/icons_user2-512.png"/>
            </div>
            <div class="commentText">
              <p class=""> <%= comment.text %> </p>
              <p class=""> <%= comment.user.name %> <span class="date sub-text"> <%= comment.grade %> star(s)</span></p>
            </div>
          </li>
        <% end %>
      </ul>

      <!--Review form-->
      <form class="form-inline" role="form" action="/restaurant/new-comment" method="post">
        <div class="form-group">
          <input class="form-control" type="text"  name="text" placeholder="Your comments"/>
        </div>
        <div>
          <select name="grade" class="form-control">
            <option value="1">1 star</option>
            <option value="2">2 star</option>
            <option value="3">3 star</option>
            <option value="4">4 stars</option>
            <option value="5">5 stars</option>
          </select>
        </div>
        <div class="form-group">

          <button class="btn btn-default">Add</button>
        </div>
      </form>

    </div>
  </div>


</div>
</body>
</html>
